---
layout: post
title: "Process와 Thread"
author: "Lin"
tags: 운영체제
---
### CS Study Day 4 - Part3

+ 2020.12.14 update

<br>
## 프로세스 
- 프로세스는 `실행 중인 프로그램`으로 `디스크로부터 메모리에 적재되어 CPU의 할당을 받을 수 있는 것`을 의미
- 운영체제로부터 주소 공간, 파일, 메모리 등을 할당받으며 이를 총칭하여 프로세스라고 한다. 
- Code와 임시 자료를 갖는 프로세스 Stack, 전역 변수들을 수록하는 Data 섹션, 동적으로 할당되는 메모리인 Heap을 포함

<br> <img src="https://user-images.githubusercontent.com/33534771/77537773-fe37fb00-6ee1-11ea-8def-4dd11523b5e7.png"  width="400">

<br>

### 프로세스 제어 블록(Process Control Block, PCB)
- 특정 **프로세스에 대한 중요한 정보를 저장**하고 있는 커널 내의 자료구조
- 운영체제는 프로세스를 관리하기 위해 **프로세스의 생성과 동시에 고유한 PCB 생성**
- 프로세스 전환이 발생할 때, 진행 상황을 PCB에 저장 후 반환 

<br>

## 스레드 
- 스레드는 `프로세스의 실행 단위`
- 한 프로세스 내에서 동작되는 여러 실행 흐름으로 프로세스 내의 주소 공간이나 자원을 공유 가능
- 하나의 프로세스를 다수의 실행 단위로 구분하여 자원을 공유하고 자원의 생성과 관리의 중복성을 최소화하여 수행 능력을 향상시키는 것을 **멀티 스레딩** <br>
-> 스레드의 독립적인 작업 수행을 위해 각각 Stack과 PC 레지스터 값 보유 <br>
-> 스택: 독립적인 함수 호출을 위한 최소 조건
-> PC 레지스터: 명령어가 어디까지 수행했는지 기록하기 위해 

<br> <img src="https://user-images.githubusercontent.com/33534771/77537866-232c6e00-6ee2-11ea-91dc-12dacf688276.png"  width="400">

<br>

### 멀티 스레딩의 장점 
프로세스를 이용하여 동시에 처리하던 일을 스레드로 구현할 경우 `메모리 공간과 시스템 자원 소모`가 줄어들게 된다. 
스레드 간의 통신이 필요한 경우에도 별도의 자원을 이용하는 것이 아니라 전역 변수 공간 또는 Heap 영역을 이용하여 데이터를 주고받을 수 있다. 

### 멀티 스레딩의 문제점
멀티 프로세스 기반은 프로세스 간 공유하는 자원이 없기 때문에 동일한 자원에 동시에 접근하는 일이 없었지만 멀티 스레딩을 기반으로 프로그래밍 할 때는 `동기화 문제`가 생길 수 있다. 
서로 다른 스레드가 데이터와 힙 영역을 공유하기 때문에 어떤 스레드가 다른 스레드에서 사용중인 변수나 자료구조에 접근하여 엉뚱한 값을 읽어오거나 수정할 수 있다. 
<br> 그래서 멀티 스레딩 환경에서는 동기화 작업이 필요하다. 동기화를 통해 작업 처리 순서와 공유 자원에 대한 접근을 컨트롤 하는 것이다. (상호배제)

<br>

## 멀티 스레드 vs 멀티 프로세스
멀티 스레드는 **메모리 공간 절약**과 **문맥 전환이 빠르다**는 장점이 있지만 오류로 인해 하나의 스레드가 종료되면 **전체 스레드도 종료**된다는 문제점과 **동기화 문제**를 안고 있다. 
<br>반면에 멀티 프로세스는 하나가 죽더라도 **다른 프로세스에는 영향을 끼치지 않**지만, 멀티 스레드보다 **많은 메모리 공간과 CPU 시간**을 차지한다는 단점이 존재한다. 
