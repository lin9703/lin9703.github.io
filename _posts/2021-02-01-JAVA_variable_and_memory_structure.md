---
layout: post
title: "변수와 메모리 구조"
author: "Lin"
tags: JAVA
---
### CS Study Day 13 - Part7

<br>

<img src="https://user-images.githubusercontent.com/33534771/74100794-00363c80-4b76-11ea-9616-2a819e6dcb4b.png" width="35%"/>


#### 1. 메소드 영역 
- 클래스에 대한 정보와 클래스 변수(static variable)이 저장되는 영역
- JVM은 특정 클래스 파일이 사용되면 해당 클래스 파일(*.class)을 읽어 클래스에 대한 정보를 메소드 영역에 저장

<br>

#### 2. 힙 영역
- 모든 인스턴스 변수가 저장되는 영역
- new 키워드를 이용해 인스턴스가 생성되면, 해당 인스턴스의 정보를 힙 영역에 저장
- 메모리는 낮은 주소 -> 높은 주소로 할당

<br>

#### 3. 스택 영역
- 메소드가 호출될 때, 메소드의 스택 프레임이 저장되는 영역
    - `스택 프레임`: 스택 영역에 저장되는 메소드의 호출 정보
- 메소드 호출 시, 메소드 호출과 관계되는 매개변수와 지역 변수를 스택 영역에 저장
- 스택 영역은 메소드의 호출과 함께 할당되며, 메소드의 호출이 완료되면 소멸
- LIFO 구조로 메모리는 높은 주소 -> 낮은 주소로 할당 
 
<br>

## 선언 위치에 따른 변수의 종류
인스턴스, 클래스, 지역 변수가 있고 선언된 위치에 따라 종류가 결정된다.

```java
public class Test{
  // iv, cv는 클래스 내부에 선언되어 있으므로 멤버 변수 
  int iv; // 인스턴스 변수
  static int cv; // 클래스 변수
  
  void print(){
    int lv; // 지역 변수
  }
}
```

#### 멤버 변수 
초기화를 하지 않을 경우 변수의 자료형에 맞게 기본값으로 초기화
1. 인스턴스 변수
- 인스턴스 생성 시 생성되므로 인스턴스 변수를 사용하기 전 객체 생성 필수
- **독립적인 저장공간**을 가지므로 인스턴스 별로 다른 값 보유 가능 
- `힙 영역`에 올라간다

2. 클래스 변수 
- `static` 키워드가 붙은 변수
- **해당 클래스의 모든 인스턴스가 공통된 값을 공유**
- 클래스가 로딩될 때 생성되어 메모리에 딱 한 번만 올라가고 종료될 때까지 유지 
- public을 붙이면 같은 프로그램 내의 어디서든 접근 가능한 전역 변수로 사용 
- 인스턴스 생성 없이 접근 가능해 **클래스이름.클래스변수**를 통해 접근 가능
- `메소드 영역`에 올라가며, 주로 **공유의 목적**으로 사용 

#### 지역변수
사용하기 전 반드시 초기화 필요 
- 메소드 내에 선언되며 메소드 내에서만 사용 가능 
- 메소드가 실행될 때 메모리를 할당받으며 메소드가 끝나면 소멸 
- `스택 영역`에 올라간다. 