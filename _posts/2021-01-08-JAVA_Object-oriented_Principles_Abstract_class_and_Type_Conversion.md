---
layout: post
title: "JAVA 객체지향 핵심 원리 - (5) 추상 클래스와 객체의 형변환"
author: "Lin"
tags: JAVA
---

## 추상 클래스와 내부 클래스
### 추상 클래스 
- 추상 메서드: 메서드의 `시그니처(리턴타입, 메서드명, 매개변수)`만 정의 (구체적인 행위, 블록({})은 제외)
    - 상속을 통해 의미를 가짐
    
- 추상 클래스: 일반적으로 하나 이상의 추상 메서드를 포함 <br>
(추상 메서드가 없는 클래스도 추상 클래스로 선언 가능, 그러나 추상 메서드를 포함하는 클래스는 반드시 추상 클래스로 선언되어야 함)
    - `객체 생성을 할 수 없음`: 아무런 기능도 없는 추상 메서드가 호출된다는 것은 논리적으로 맞지 않음 
    - 추상 클래스의 자식 클래스는 부모의 모든 추상 메서드를 `Overriding` 해야 객체를 생성할 수 있음 
        - 필요성: 추상 클래스를 사용해야 `유지보수의 편의성`을 높일 수 있다. <br>
        -> 사용하려는 객체 변경 시 많은 수정이 발생한다면 유지보수는 어려워진다. 
        -> 추상 클래스를 적용하면, 자식 클래스들의 메서드를 `통일` 할 수 있다. 
        -> 최소한의 수정으로 원하는 객체를 사용할 수 있게 된다. (유지보수성 향상) 
        
### 내부 클래스 
클래스가 다른 클래스를 포함하는 경우, 내부에 포함된 클래스를 내부 클래스라 명칭        
<br><br>
`정의되는 위치`에 따라 구분
- 멤버 클래스: 멤버 변수와 동일한 위치에 선언된 내부 클래스
    - static 멤버와 instance 멤버로 나뉨 
        - instance 멤버 내부 클래스: 내부 클래스의 객체 생성을 위해 외부 클래스의 객체 생성 필수
        - static 멤버 내부 클래스: 외부 클래스 객체를 생성하지 않고도 내부 클래스 객체 생성 가능 
    - 다른 클래스에서도 활용될 수 있고 클래스의 멤버 변수와 성격 비슷
     
- 지역 클래스: 메서드 내에 클래스가 정의되어 있는 경우 
    - 지역 클래스(이름이 있음)와 무명 클래스(이름을 갖지 않음)로 나뉨 
        - 지역 내부 클래스: 클래스의 이름이 명시되는 클래스
        - 무명 내부 클래스: 이름을 갖지 않은 내부 클래스
            - new 예악어 뒤에 명시된 클래스가 기존의 클래스인 경우에는 자동적으로 이 클래스의 자식 클래스가 됨
            - 추상 클래스의 객체를 내부 클래스 형태로 생성할 때 자주 사용 <br>
            (추상 클래스는 객체를 생성할 수 없기에 상속하여 객체를 생성해야 한다. 간단하게 무명의 내부 클래스로 사용하는 것이 편리할 수 있다.)
            
    - 활용 범위가 메서드 블록 내부로 제한되고 지역 변수와 성격 비슷 
    
-> 잘 활용하면 자바의 클래스 구조를 더 조직화 및 소스코드 구현 시 효율 높임 <br>
-> 주의점: 내부 클래스가 생성하기 위해서 `외부 클래스의 객체 생성이 필요` (static 제외)

<br>

## 객체의 형변환 
- 묵시적 형변환(Promotion): 작은 데이터 타입 -> 큰 데이터 타입 // 데이터의 손실의 우려가 없어 자동 캐스팅
- 명시적 형변환(Demotion): 큰 데이터 타입 -> 작은 데이터 타입 // 데이터 손실의 우려로 명시적 캐스팅 

<br>

#### 객체 참조변수들 간의 대입 규칙
- 왼쪽 항과 오른쪽 항의 객체 유형이 서로 다른 경우, `상속` 관계여야 한다.
- 자식 클래스의 객체는 부모 타입의 참조 변수에 할당 (`묵시적 형변환`)
- 즉, 자식 클래스에서 부모 클래스 유형으로 할당하는 것은 가능하지만 반대의 경우에는 `명시적 형변환` <br
ㄴ 할당되는 인스턴스 유형에 따라 `실행 오류 발생` <br>
ㄴ 특정 클래스 형이 다른 클래스 형으로 변활될 수 있는지 여부를 수시로 판단하기 위해 `instanceof` 연산자 사용 
    - 생성된 객체가 class와 관게있는 타입으로 만들었는지 확인 -> true 또는 false 값 반환 

<br>

#### 객체의 형변환 적용 
좀 더 유지보수가 편한 구조로 변경 가능 <br>
-> 소스 코드의 수정 없이 객체를 바꿔서 실행 가능 (모든 자식 클래스의 객체들은 부모 타입으로 **묵시적 형변환** 되어 리턴 가능)

<br>

#### 형변환과 멤버 변수 
형변환에 참여한 상속 관계에 있는 두 클래스 간에는 동일한 이름의 변수가 존재하거나 메서드가 Overriding 되어 있을 수 있음<br>
-> `생성된 객체 변수를 통해 멤버에 접근할 때 주의`

- `변수`에 대한 접근은 `객체의 유형`에 의해 결정
- `메서드 호출`은 할당되는 `인스턴스`에 의해 결정 

-> 객체 참조 변수가 변수나 메서드를 참조하는 경우, `참조 관계를 결정하는 시간이 다르기 때문`에 나타나는 차이 